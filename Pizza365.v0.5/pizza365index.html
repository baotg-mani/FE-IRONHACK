<!DOCTYPE html>
<html>
  <title> Bootstrap template- Pizza 365 project</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

  <body>

    <!-- Menu -->
    <div class="container-fluid bg-light">
      <div class="row">
        <div class="col-sm-12">
          <nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
              <ul class="navbar-nav nav-fill w-100">
                <li class="nav-item active">
                  <a class="nav-link" href="#">Home</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#plans">Plans</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#about">About</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#contact">Contact</a>
                </li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </div>

    <!-- Content -->
    <div class="container" style="padding: 120px 0 50px 0;">
      <div class="row">
        <div class="col-sm-12">
          <div class="row">
            <!-- Title row home -->
            <div class="col-sm-12" style="color: rgb(238, 154, 28);">
              <h1><b>Pizza 365 <br> Truly Italian</b></h1> 
            </div>

            <!-- Slide row home -->
            <div class="col-sm-12">
              <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                <ol class="carousel-indicators">
                  <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                  <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                  <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                  <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
                  <li data-target="#carouselExampleIndicators" data-slide-to="4"></li>
                </ol>
                <div class="carousel-inner">
                  <div class="carousel-item active">
                    <img class="d-block w-100" src="images/mon_y_1.jpg" alt="First slide">
                  </div>
                  <div class="carousel-item">
                    <img class="d-block w-100" src="images/mon_y_2.jpg" alt="Second slide">
                  </div>
                  <div class="carousel-item">
                    <img class="d-block w-100" src="images/mon_y_3.jpg" alt="Third slide">
                  </div>
                  <div class="carousel-item">
                    <img class="d-block w-100" src="images/mon_y_4.jpg" alt="Fourth slide">
                  </div>
                  <div class="carousel-item">
                    <img class="d-block w-100" src="images/mon_y_5.jpg" alt="Fifth slide">
                  </div>
                </div>
                <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="sr-only">Next</span>
                </a>
              </div>
            </div>

            <!-- Title what we offer -->
            <div class="col-sm-12 text-center p-4 mt-4">
              <h2><b class="p-2 border-bottom">Why is Pizza 365</b></h2>
            </div>

            <!-- Content what we offer -->
            <div class="col-sm-12">
              <div class="row">
                <div class="col-sm-3 p-4 bg-white border">
                  <h3 class="p-2">Consultation</h3>
                  <p class="p-2">Hệ thống sản xuất bánh Pizza lớn nhất Hà Nội</p>
                </div>
                <div class="col-sm-3 p-4 bg-warning border">
                  <h3 class="p-2">Branding</h3>
                  <p class="p-2">Thực đơn đa dạng từ nhãn hiêu Ý</p>
                </div>
                <div class="col-sm-3 p-4 bg-white border">
                  <h3 class="p-2">Design</h3>
                  <p class="p-2">Không gian thiết kế rộng rãi, thoáng mát.</p>
                </div>
                <div class="col-sm-3 p-4 bg-warning border">
                  <h3 class="p-2">Promises</h3>
                  <p class="p-2">Dịch vụ chuyên nghiệp.</p>
                </div>
              </div>
            </div>
          </div>

          <div id="plans" class="row">
            <!-- Title what we offer -->
            <div class="col-sm-12 text-center p-4 mt-4">
              <h2><b class="p-1 border-bottom">Menu Combo Pizza 365</b></h2>
              <p><span class="p-2">Hãy chọn cỡ pizza phù hợp với bạn!</span></p>
            </div>
            <!-- Content what we offer -->
            <div class="col-sm-12">
              <div class="row">
                <div class="col-sm-4">
                  <div class="card">
                    <div class="card-header bg-dark text-white text-center">
                      <h3>S (small)</h3>
                    </div>
                    <div class="card-body text-center">
                      <ul class="list-group list-group-flush">
                        <li class="list-group-item"><b>20cm</b> : Đường kính</li>
                        <li class="list-group-item"><b>2</b> : Sườn nướng</li>
                        <li class="list-group-item"><b>200g</b> : Salad</li>
                        <li class="list-group-item"><b>2</b> : Nước ngọt</li>
                        <li class="list-group-item"><h1><b>150.000</b></h1> VNĐ</li>
                      </ul>
                    </div>
                    <div class="card-footer text-center">
                      <button onclick="onSmallOrderClick()" id="button-small" class="btn btn-success">Chọn</button>
                    </div>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="card">
                    <div class="card-header bg-secondary text-white text-center">
                      <h3>M (medium)</h3>
                    </div>
                    <div class="card-body text-center">
                      <ul class="list-group list-group-flush">
                        <li class="list-group-item"><b>25cm</b> : Đường kính</li>
                        <li class="list-group-item"><b>4</b> : Sườn nướng</li>
                        <li class="list-group-item"><b>300g</b> : Salad</li>
                        <li class="list-group-item"><b>3</b> : Nước ngọt</li>
                        <li class="list-group-item"><h1><b>200.000</b></h1> VNĐ</li>
                      </ul>
                    </div>
                    <div class="card-footer text-center">
                      <button onclick="onMediumOrderClick()" id="button-medium" class="btn btn-success" >Chọn</button>
                    </div>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="card">
                    <div class="card-header bg-dark text-white text-center">
                      <h3>L (large)</h3>
                    </div>
                    <div class="card-body text-center">
                      <ul class="list-group list-group-flush">
                        <li class="list-group-item"><b>30cm</b> : Đường kính</li>
                        <li class="list-group-item"><b>8</b> : Sườn nướng</li>
                        <li class="list-group-item"><b>500g</b> : Salad</li>
                        <li class="list-group-item"><b>4</b> : Nước ngọt</li>
                        <li class="list-group-item"><h1><b>250.000</b></h1> VNĐ</li>
                      </ul>
                    </div>
                    <div class="card-footer text-center">
                      <button onclick="onLargeOrderClick()" id="button-large" class="btn btn-success">Chọn</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div id="about" class="row">
            <!-- Title Who We Are -->
            <div class="col-sm-12 text-center p-4 mt-4">
              <h2><b class="p-2 border-bottom">Chọn loại Pizza</b></h2>
            </div>

            <!-- Content Who We Are -->
            <div class="col-sm-12">
              <div class="row">
                <div class="col-sm-4">
                  <div class="card w-100" style="width: 18rem;">
                    <img src="images/pizza_type_1.jpg" class="card-img-top">
                    <div class="card-body card-footer text-center">
                      <h3>Hawaiian Pizza</h3>
                      <p>Anna Painter</p>
                      <p>Sweet, juicy pineapple and sliced ham may not be traditional Italian pizza toppings.</p>
                      <p><button onclick="onHawaiPizzaClick()" id="btn-hawai-pizza" class="btn btn-success">Chọn</button></p>
                    </div>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="card w-100" style="width: 18rem;">
                    <img src="images/pizza_type_2.jpg" class="card-img-top">
                    <div class="card-body card-footer text-center">
                      <h3>Seafood Pizza</h3>
                      <p>Food.com</p>
                      <p>Seafood pizza is pizza prepared with seafood as a primary ingredient.</p>
                      <p><button onclick="onSeafoodPizzaClick()" id="btn-seafood-pizza" class="btn btn-success">Chọn</button></p>
                    </div>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="card w-100" style="width: 18rem;">
                    <img src="images/pizza_type_3.jpg" class="card-img-top">
                    <div class="card-body card-footer text-center">
                      <h3>Bacon Pizza</h3>
                      <p>thespruceeats.com</p>
                      <p>The key to a successful bacon pizza is to cook the bacon to a crisp consistency.</p>
                      <p><button onclick="onBaconPizzaClick()" id="btn-bacon-pizza" class="btn btn-success">Chọn</button></p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div id="contact" class="row">
            <!-- Title Contact Us -->
            <div class="col-sm-12 text-center p-4 mt-4">
              <h2><b class="p-2 border-bottom">Gửi đơn hàng</b></h2>
            </div>

            <!-- Content Contact Us -->
            <div class="col-sm-12 p-2 jumbotron">
              <div class="row">
                <div class="col-sm-12">
                  <div class="form-group">
                    <label for="fullname">Họ và tên</label>
                    <input type="text" class="form-control" id="inp-fullname" placeholder="Họ và tên">
                  </div>
                  <div class="form-group">
                    <label for="email">Email</label>
                    <input type="text" class="form-control" id="inp-email" placeholder="Email">
                  </div>
                  <div class="form-group">
                    <label for="dien-thoai">Điện thoại</label>
                    <input type="text" class="form-control" id="inp-dien-thoai" placeholder="Điện thoại">
                  </div>
                  <div class="form-group">
                    <label for="dia-chi">Địa chỉ</label>
                    <input type="text" class="form-control" id="inp-dia-chi" placeholder="Địa chỉ">
                  </div>
                  <div class="form-group">
                    <label for="message">Lời nhắn</label>
                    <input type="text" class="form-control" id="inp-message" placeholder="Lời nhắn">
                  </div>
                  <div class="form-group">
                    <label for="message">Mã giảm giá</label>
                    <input type="text" class="form-control" id="inp-discount" placeholder="Voucher ID">
                  </div>
                  <button type="button" class="btn btn-info w-100" onclick="onBtnSendOrderClick()">Gửi đơn</button>
                </div>
              </div>
            </div>
            <!-- vùng hiển thị thông tin đơn hàng(order) -->
            <div id="div-container-order" class="container bg-info" style="display: none;">
              <div id="div-order-infor" class="text-white p-3">...</div>
              <div class="p-2">
                <button type="button" class="btn container bg-warning p-2 jumbotron">Xác nhận</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="container-fluid bg-light p-5">
      <div class="row text-center">
        <div class="col-sm-12">
          <h4 class="m-2">Footer</h4>
          <a href="#" class="btn btn-dark m-3"><i class="fa fa-arrow-up"></i>To the top</a>
          <div class="m-2">
            <i class="fa fa-facebook-official w3-hover-opacity"></i>
            <i class="fa fa-instagram w3-hover-opacity"></i>
            <i class="fa fa-snapchat w3-hover-opacity"></i>
            <i class="fa fa-pinterest-p w3-hover-opacity"></i>
            <i class="fa fa-twitter w3-hover-opacity"></i>
            <i class="fa fa-linkedin w3-hover-opacity"></i>
          </div>
        </div>
      </div>
    </div>
    <script>
    "use strict";
    /*** REGION 1 - Global variables - Vùng khai báo biến, hằng số, tham số TOÀN CỤC */
    // bạn có thể dùng để lưu trữ combo được chọn, 
    // mỗi khi khách chọn menu S, M, L bạn lại đổi giá trị properties của nó
    var gSelectedMenuStructure = {
      menuName: "...",    // S, M, L
      duongKinhCM: 0,
      suonNuong: 0,
      saladGr: 0,
      drink: 0,
      priceVND: 0
    }

    var gBtnSmallElement = document.getElementById("button-small");
    var gBtnMediumElement = document.getElementById("button-medium");
    var gBtnLargeElement = document.getElementById("button-large");

    var gBtnHawaiPizzaElement = document.getElementById("btn-hawai-pizza");
    var gBtnSeafoodPizzaElement = document.getElementById("btn-seafood-pizza");
    var gBtnBaconPizzaElement = document.getElementById("btn-bacon-pizza");
    // bạn có thể dùng để lưu loại pizza đươc chọn, mỗi khi khách chọn, bạn lại đổi giá trị cho nó
    var gSelectedPizzaType = "..." 
    // danh sách các mã giảm giá
    var gDiscountVouchers = [
      { voucherID:"A1", percentDiscount: 20 },   // mã giảm giá là A1, phần trăm giảm giá 20%
      { voucherID:"A2", percentDiscount: 10 },
      { voucherID:"A3", percentDiscount: 5 },
      { voucherID:"A4", percentDiscount: 30 },
      { voucherID:"A5", percentDiscount: 20 },
      { voucherID:"B1", percentDiscount: 25 },
      { voucherID:"B2", percentDiscount: 15 },
      { voucherID:"B3", percentDiscount: 5 },
      { voucherID:"B4", percentDiscount: 30 },
      { voucherID:"B5", percentDiscount: 40 }  
    ];
    // 1 global variable to save info of the order
    var gTheOrder = {
      fullname: "",
      email: "",
      phoneNumber: "",
      address: "",
      message: "",
      voucher: ""
    }
    /*** REGION 2 - Vùng gán / thực thi hàm xử lý sự kiện cho các elements */

    /*** REGION 3 - Event handlers - Vùng khai báo các hàm xử lý sự kiện */
    function onSmallOrderClick() {
      "use strict";
      //chuyển màu của btn đc click và vtn ko được click
      setMenuButtonColor(gBtnSmallElement);
      gBtnMediumElement.className = "btn btn-success";
      gBtnLargeElement.className = "btn btn-success";
      //truyền và lưu dữ liệu lựa chọn của khách hàng vào biến
      gSelectedMenuStructure = {
        menuName: "S",
        duongKinhCM: 20,
        suonNuong: 2,
        saladGr: 200,
        drink: 2,
        priceVND: 150000
      }
      console.log(gSelectedMenuStructure);
    }

    function onMediumOrderClick() {
      "use strict";
      //chuyển màu btn
      setMenuButtonColor(gBtnMediumElement);
      gBtnSmallElement.className = "btn btn-success";
      gBtnLargeElement.className = "btn btn-success";
      //truyền và lưu dữ liệu lựa chọn của khách hàng vào biến
      gSelectedMenuStructure = {
        menuName: "M",
        duongKinhCM: 25,
        suonNuong: 4,
        saladGr: 300,
        drink: 3,
        priceVND: 200000
      }
      console.log(gSelectedMenuStructure);
    }

    function onLargeOrderClick() {
      "use strict";
      //chuyển màu btn
      setMenuButtonColor(gBtnLargeElement);
      gBtnMediumElement.className = "btn btn-success";
      gBtnSmallElement.className = "btn btn-success";
      //truyền và lưu dữ liệu lựa chọn của khách hàng vào biến
      gSelectedMenuStructure = {
        menuName: "L",
        duongKinhCM: 30,
        suonNuong: 8,
        saladGr: 500,
        drink: 4,
        priceVND: 250000
      }
      console.log(gSelectedMenuStructure);
    }

    function onHawaiPizzaClick() {
      "use strict";
      setMenuButtonColor(gBtnHawaiPizzaElement);
      gBtnSeafoodPizzaElement.className = "btn btn-success";
      gBtnBaconPizzaElement.className = "btn btn-success";
      //gán thông tin pizza vào biến
      gSelectedPizzaType = "Hawaiian Pizza";
      console.log(gSelectedPizzaType);
    }

    function onSeafoodPizzaClick() {
      "use strict";
      setMenuButtonColor(gBtnSeafoodPizzaElement);
      gBtnHawaiPizzaElement.className = "btn btn-success";
      gBtnBaconPizzaElement.className = "btn btn-success";
      //gán thông tin pizza vào biến
      gSelectedPizzaType = "Seafood Pizza";
      console.log(gSelectedPizzaType);
    }

    function onBaconPizzaClick() {
      "use strict";
      setMenuButtonColor(gBtnBaconPizzaElement);
      gBtnSeafoodPizzaElement.className = "btn btn-success";
      gBtnHawaiPizzaElement.className = "btn btn-success";
      //gán thông tin pizza vào biến
      gSelectedPizzaType = "Bacon Pizza";
      console.log(gSelectedPizzaType);
    }

    // Hàm xử lý sự kiện ấn nút Gửi đơn
    function onBtnSendOrderClick() {
      "use strict";
      //1. get data
      getFormData(gTheOrder);
      //2. validate
      var vIsValidData = validateData(gTheOrder);
      //3. event handler show information of the order
      if(vIsValidData) {
        showOrderInfor(gTheOrder);
      }
    }
    /*** REGION 4 - Common funtions - Vùng khai báo hàm dùng chung trong toàn bộ chương trình*/
    // Hàm đổi màu clicked button
    function setMenuButtonColor(paramButton) {
      paramButton.className = "btn btn-warning"; 
    }

    // Hàm truy thu dữ liệu từ Form order
    function getFormData(paramTheOrder) {
      "use strict";
      //truy xuất dữ liệu ô nhập
      var vFullnameElement = document.getElementById("inp-fullname");
      var vEmailElement = document.getElementById("inp-email");
      var vPhoneNumElement = document.getElementById("inp-dien-thoai");
      var vAddressElement = document.getElementById("inp-dia-chi");
      var vMessageElement = document.getElementById("inp-message");
      var vVoucherElement = document.getElementById("inp-discount");
      //gán vào biến 
      paramTheOrder.fullname = vFullnameElement.value.trim();
      paramTheOrder.email = vEmailElement.value.trim();
      paramTheOrder.phoneNumber = vPhoneNumElement.value.trim();
      paramTheOrder.address = vAddressElement.value.trim();
      paramTheOrder.message = vMessageElement.value.trim();
      paramTheOrder.voucher = vVoucherElement.value.trim();
    }

    // Hàm Kiểm tra dữ liệu nhập hợp lệ? và cảnh báo
    function validateData(paramTheOrder) {
      "use strict";
      if(paramTheOrder.fullname === "") {
        alert("Enter fullname");
        return false;
      }
      if(paramTheOrder.email === "") {
        alert("Enter email");
        return false;
      }
      if(paramTheOrder.phoneNumber === "") {
        alert("Enter phone number");
        return false;
      }
      if(paramTheOrder.address === "") {
        alert("Enter address");
        return false;
      }
      if(paramTheOrder.email.includes("@") == false) {
        console.log("Not an Email!");
        alert("Invalid email!");
        return false;
      }
      return true;
    }

    // Hàm hiển thị thông tin Order pizza
    function showOrderInfor(paramTheOrder) {
      "use strict";
      var vDivContainerOrderElement = document.getElementById("div-container-order");
      var vDivOrderinforElement = document.getElementById("div-order-infor");
      var vUsedVoucher = getDiscountByVoucherId(paramTheOrder.voucher);
      // hiển thị vùng chứa
      vDivContainerOrderElement.style.display = "block";
      // hiển thị dữ liệu
      vDivOrderinforElement.innerHTML = "Họ và tên: " + gTheOrder.fullname;
      vDivOrderinforElement.innerHTML += "<br>Email: " + gTheOrder.email;
      vDivOrderinforElement.innerHTML += "<br>Điện thoại: " + gTheOrder.phoneNumber;
      vDivOrderinforElement.innerHTML += "<br>Địa chỉ: " + gTheOrder.address;
      vDivOrderinforElement.innerHTML += "<br>Lời nhắn: " + gTheOrder.message;
      vDivOrderinforElement.innerHTML += "<br>----------------------------";
      vDivOrderinforElement.innerHTML += "<br>Kích cỡ: " + gSelectedMenuStructure.menuName;
      vDivOrderinforElement.innerHTML += "<br>Đường kính: " + gSelectedMenuStructure.duongKinhCM;
      vDivOrderinforElement.innerHTML += "<br>Sườn nướng: " + gSelectedMenuStructure.suonNuong;
      vDivOrderinforElement.innerHTML += "<br>Salad: " + gSelectedMenuStructure.saladGr;
      vDivOrderinforElement.innerHTML += "<br>Nước ngọt: " + gSelectedMenuStructure.drink;
      vDivOrderinforElement.innerHTML += "<br>----------------------------";
      vDivOrderinforElement.innerHTML += "<br>Loại pizza: " + gSelectedPizzaType;
      vDivOrderinforElement.innerHTML += "<br>Mã voucher: " + vUsedVoucher.voucherID;
      vDivOrderinforElement.innerHTML += "<br>Discount %: " + vUsedVoucher.percentDiscount;
      vDivOrderinforElement.innerHTML += "<br>Phải thanh toán: " + gSelectedMenuStructure.priceVND*(1-(vUsedVoucher.percentDiscount/100));
    }
    // Function return discount Id có trong object gDiscountVouchers
    function getDiscountByVoucherId(paramVoucherId) {
      "use strict";
      var vIsFound = false;
      var vIndex = 0;
      var vDiscountObj = null;

      // when we haven't found it and haven't found it all yet
      while(vIsFound == false && vIndex < gDiscountVouchers.length) {
          //practice find..
          if(gDiscountVouchers[vIndex].voucherID === paramVoucherId) {
              vIsFound = true;
              // which voucher is found
              vDiscountObj = gDiscountVouchers[vIndex];
          }
          else {
              vIndex++;
          }
      }
      // if enter invalid voucherId, it'll alert to web
      if(vDiscountObj == null) {
        alert("Mã giảm giá không hợp lệ");
      }
      return vDiscountObj;
    }
    </script>
  </body>
</html>
